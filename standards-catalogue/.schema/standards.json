{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://github.com/alphagov/data-standards-authority/blob/main/standards-catalogue/.schema/standards.json",
  "title": "Data Standards Authority Standards objects",
  "description": "A JSON Schema to manage the format of Standards objects",
  "type": "object",
  "required": [
    "name",
    "contraction",
    "specification",
    "maintainer",
    "catalogue_status_events",
    "topics",
    "license_id"
  ],
  "properties": {
    "identifier": {
      "$comment": "The unique identifier assigned to this standard",
      "type": "string"
    },
    "name": {
      "$comment": "The title or name of the standard",
      "type": "string",
      "maxLength": 70
    },
    "contraction": {
      "$comment": "A shorter way of referring to the standard, for instance via an acronym",
      "type": "string",
      "maxLength": 10
    },
    "specification": {
      "$ref": "#/definitions/specification"
    },
    "maintainer": {
      "$comment": "The name or identifier of the organisation that maintains the standard",
      "type": "string"
    },
    "catalogue_status_events": {
      "$comment": "The events that this standard's status has been through",
      "type": "array",
      "items": {
        "$ref": "#/definitions/catalogue_status_event"
      }
    },
    "topics": {
      "$comment": "The overarching topics that this fits under",
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/topic"
      }
    },
    "description": {
      "$comment": "The long-form description of the standard, for instance written using Markdown",
      "type": "string"
    },
    "license_id": {
      "$comment": "A Software Package Data Exchange (SPDX) license identifier, if applicable, or `Proprietary` / `Unknown`",
      "type": "string",
      "pattern": "(Proprietary|Unknown|.+)",
      "minLength": 1
    }
  },
  "additionalProperties": false,
  "definitions": {
    "topic": {
      "$comment": "The human-readable topic descriptions that this standard relates to ",
      "type": "string"
    },
    "specification": {
      "$comment": "A container object to store information about the specification that this standard relates to",
      "type": "object",
      "required": [
        "name",
        "url",
        "published"
      ],
      "properties": {
        "name": {
          "$comment": "A the name of the specification for the standard",
          "type": "string",
          "minLength": 1
        },
        "url": {
          "$comment": "A link to a publicly accessible specification for the standard",
          "type": "string",
          "pattern": "^https?://.*"
        },
        "published": {
          "$comment": "The date that the specification was published",
          "type": "string",
          "format": "date"
        }
      }
    },
    "catalogue_status_event": {
      "$comment": "A change in status for a standard, for the purpose of the standards catalogue's workflow",
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/status"
        },
        "date": {
          "$comment": "Date that the change in status occurred",
          "type": "string",
          "format": "date"
        }
      }
    },
    "status": {
      "type": "string",
      "enum": [
        "active",
        "review"
      ]
    }
  }
}
